<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/punchlist.css">
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="js/punchlist.js"></script>
  </head>
  <body>
    <script>
    $( document ).ready(function() {
      var jsonTransform = {
        data: [
        {
          field: "id",
          name: "id"
        }],
        item: "item",
        checked: "index",
        tags: [ 
          { 
            field:"project",
            title:"Project",
            convert: null,
          },
          {
            field:"company",
            title:"Company",
            convert: null,
          }, 
          {
            field: "user",
            title: "User",
            convert: null,
          }, 
          {
            field:"datetime",
            title:"Date",
            convert: "date", 
          }
        ],
        comments: { 
          listField: "comments", 
          field:"comment",
          deletable: false,
          tags: [
            {
              field: "user",
              title: "User",
              convert: null,
            }, 
            {
              field:"datetime",
              title:"Date",
              convert: "date", 
            }
          ]
        }
      }
      function onAdd(itemId, val) {
        console.log(itemId + " - " + val);
        // Can set values in $(#itemId).data('item') ... that will be send in the other calls
        return true;
      }
      function onDelete(itemId, itemData) {
        console.log(itemId + " - " + JSON.stringify(itemData));
        return true;
      }      
      function onChecked(itemId, itemData, checked) {
        console.log(itemId + " - " + JSON.stringify(itemData) + " - " + checked);
        return true;
      }
      var options = { 
        fillDataCall: "json/response.json",
        fillDataTransform: jsonTransform,
        addItemHandler: onAdd,
        removeItemHandler: onDelete,
        checkedItemHandler: onChecked,
      };
      $('#punchlist-container').punchList(options);
    });
    </script>
    <div id="punchlist-container"></div>
  </body>
</html>